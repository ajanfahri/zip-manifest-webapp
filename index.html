<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manifest OluÅŸturucu</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <style>
    :root {
      --primary: #0066cc;
      --bg: #f9f9f9;
      --accent: #e0e0e0;
      --font: 'Segoe UI', sans-serif;
    }

    body {
      font-family: var(--font);
      padding: 1rem;
      margin: auto;
      max-width: 800px;
      background-color: var(--bg);
      color: #333;
      line-height: 1.5;
      padding-bottom: 4rem; /* space for fixed footer */
    }

    h1 {
      font-size: 1.8rem;
      text-align: center;
      color: var(--primary);
    }

    input[type="file"] {
      display: block;
      margin: 1rem auto;
    }

    #dropZone {
      border: 2px dashed var(--primary);
      padding: 2rem;
      text-align: center;
      color: #555;
      background-color: var(--bg);
      border-radius: 8px;
      transition: background-color 0.2s ease;
    }

    #preview {
      white-space: pre-wrap;
      background: #fff;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      max-height: 300px;
      overflow-y: auto;
    }

    #status {
      text-align: center;
      margin-top: 1rem;
      font-weight: bold;
    }

    #downloadBtn {
      display: none;
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 5px;
      cursor: pointer;
      margin: 1rem auto;
      display: block;
    }

    #langSwitch {
      position: fixed;
      top: 10px;
      right: 10px;
      background: var(--primary);
      color: white;
      padding: 0.5rem;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    .links {
      text-align: center;
      margin-top: 1rem;
    }

    .links a {
      display: inline-block;
      margin: 0.25rem;
      background-color: var(--primary);
      color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      text-decoration: none;
    }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: var(--accent);
      text-align: center;
      padding: 0.5rem 0;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div id="langSwitch">English</div>
  <h1 id="title">Manifest OluÅŸturucu</h1>
  <p id="instructions">Zip dosyanÄ± sÃ¼rÃ¼kle veya aÅŸaÄŸÄ±dan seÃ§.</p>
  <input type="file" id="zipInput" accept=".zip">
  <div id="dropZone">Buraya .zip dosyasÄ±nÄ± bÄ±rak</div>
  <div id="status"></div>
  <div id="preview"></div>
  <button id="downloadBtn">manifest.txt'yi indir</button>
  <div class="links">
    <a href="compare.html">KarÅŸÄ±laÅŸtÄ±r</a>
    <a href="comparesame.html">Windows Software KarÅŸÄ±laÅŸtÄ±r</a>
    <a href="sum.html">Toplama SayfasÄ±</a>
    <a href="laser.html">Lazer Sarfiyat Hesaplama</a>
    <a href="dxf-tools.html">DXF AraÃ§larÄ±</a>
  </div>
  <script>
    const zipInput = document.getElementById('zipInput');
    const dropZone = document.getElementById('dropZone');
    const status = document.getElementById('status');
    const preview = document.getElementById('preview');
    const downloadBtn = document.getElementById('downloadBtn');
    const langSwitch = document.getElementById('langSwitch');
    let manifestBlob = null;
    let isEnglish = false;

    const texts = {
      tr: {
        title: "Manifest OluÅŸturucu",
        instructions: "Zip dosyanÄ± sÃ¼rÃ¼kle veya aÅŸaÄŸÄ±dan seÃ§.",
        dropHere: "Buraya .zip dosyasÄ±nÄ± bÄ±rak",
        reading: "Zip dosyasÄ± okunuyor...",
        ready: "manifest.txt oluÅŸturuldu",
        download: "manifest.txt'yi indir"
      },
      en: {
        title: "Manifest Generator",
        instructions: "Drag and drop a .zip file or select below.",
        dropHere: "Drop your .zip file here",
        reading: "Reading zip file...",
        ready: "manifest.txt is ready",
        download: "Download manifest.txt"
      }
    };

    function updateLanguage() {
      const t = isEnglish ? texts.en : texts.tr;
      document.getElementById('title').textContent = t.title;
      document.getElementById('instructions').textContent = t.instructions;
      dropZone.textContent = t.dropHere;
      downloadBtn.textContent = t.download;
      langSwitch.textContent = isEnglish ? 'TÃ¼rkÃ§e' : 'English';
    }

    langSwitch.addEventListener('click', () => {
      isEnglish = !isEnglish;
      updateLanguage();
    });

    updateLanguage();

    async function processZip(file) {
      status.textContent = isEnglish ? texts.en.reading : texts.tr.reading;
      preview.textContent = '';
      downloadBtn.style.display = 'none';

      const jszip = new JSZip();
      const zip = await jszip.loadAsync(file);
      const entries = [];

      await Promise.all(Object.keys(zip.files).map(async filename => {
        const entry = zip.files[filename];
        if (!entry.dir) {
          const size = entry._data.uncompressedSize || 0;
          const date = entry.date.toISOString().replace('T', ' ').split('.')[0];
          entries.push(`${filename} | ${size} bytes | ${date}`);
        }
      }));

      const manifestContent = '# ðŸ“¦ Manifest DosyasÄ±\n\n' + entries.sort().join('\n');
      preview.textContent = manifestContent;
      manifestBlob = new Blob([manifestContent], { type: 'text/plain;charset=utf-8' });
      downloadBtn.style.display = 'block';
      status.textContent = isEnglish ? texts.en.ready : texts.tr.ready;
    }

    zipInput.addEventListener('change', e => {
      if (e.target.files.length > 0) {
        processZip(e.target.files[0]);
      }
    });

    dropZone.addEventListener('dragover', e => {
      e.preventDefault();
      dropZone.style.backgroundColor = '#e0e0e0';
    });

    dropZone.addEventListener('dragleave', () => {
      dropZone.style.backgroundColor = '#f9f9f9';
    });

    dropZone.addEventListener('drop', e => {
      e.preventDefault();
      dropZone.style.backgroundColor = '#f9f9f9';
      if (e.dataTransfer.files.length > 0) {
        processZip(e.dataTransfer.files[0]);
      }
    });

    downloadBtn.addEventListener('click', () => {
      if (manifestBlob) {
        saveAs(manifestBlob, 'manifest.txt');
      }
    });
  </script>
  <footer>created by Fahreddin TOKATLI</footer>
</body>
</html>
