<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Manifest OluÅŸturucu</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <style>
    body { font-family: sans-serif; padding: 2rem; max-width: 700px; margin: auto; }
    h1 { font-size: 1.5rem; }
    #dropZone {
      border: 2px dashed #888;
      padding: 2rem;
      text-align: center;
      color: #666;
      margin-top: 1rem;
      background-color: #f9f9f9;
    }
    #preview {
      white-space: pre-wrap;
      background: #f0f0f0;
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 5px;
      max-height: 300px;
      overflow-y: auto;
    }
    #downloadBtn {
      margin-top: 1rem;
      display: none;
    }
  </style>
</head>
<body>
  <h1>Manifest OluÅŸturucu</h1>
  <p>Zip dosyanÄ± sÃ¼rÃ¼kle veya aÅŸaÄŸÄ±dan seÃ§.</p>
  <input type="file" id="zipInput" accept=".zip">
  <div id="dropZone">Buraya .zip dosyasÄ±nÄ± bÄ±rak</div>
  <div id="status"></div>
  <div id="preview"></div>
  <button id="downloadBtn">manifest.txt'yi indir</button>

  <script>
    const zipInput = document.getElementById('zipInput');
    const dropZone = document.getElementById('dropZone');
    const status = document.getElementById('status');
    const preview = document.getElementById('preview');
    const downloadBtn = document.getElementById('downloadBtn');
    let manifestBlob = null;

    async function processZip(file) {
      status.textContent = 'Zip dosyasÄ± okunuyor...';
      preview.textContent = '';
      downloadBtn.style.display = 'none';

      const jszip = new JSZip();
      const zip = await jszip.loadAsync(file);
      const entries = [];

      await Promise.all(Object.keys(zip.files).map(async filename => {
        const entry = zip.files[filename];
        if (!entry.dir) {
          const size = entry._data.uncompressedSize || 0;
          const date = entry.date.toISOString().replace('T', ' ').split('.')[0];
          entries.push(`${filename} | ${size} bytes | ${date}`);
        }
      }));

      const manifestContent = '# ğŸ“¦ Manifest DosyasÄ±\n\n' + entries.sort().join('\n');
      preview.textContent = manifestContent;
      manifestBlob = new Blob([manifestContent], { type: 'text/plain;charset=utf-8' });
      downloadBtn.style.display = 'inline-block';
      status.textContent = 'manifest.txt oluÅŸturuldu';
    }

    zipInput.addEventListener('change', e => {
      if (e.target.files.length > 0) {
        processZip(e.target.files[0]);
      }
    });

    dropZone.addEventListener('dragover', e => {
      e.preventDefault();
      dropZone.style.backgroundColor = '#e0e0e0';
    });

    dropZone.addEventListener('dragleave', () => {
      dropZone.style.backgroundColor = '#f9f9f9';
    });

    dropZone.addEventListener('drop', e => {
      e.preventDefault();
      dropZone.style.backgroundColor = '#f9f9f9';
      if (e.dataTransfer.files.length > 0) {
        processZip(e.dataTransfer.files[0]);
      }
    });

    downloadBtn.addEventListener('click', () => {
      if (manifestBlob) {
        saveAs(manifestBlob, 'manifest.txt');
      }
    });
  </script>
</body>
</html>
